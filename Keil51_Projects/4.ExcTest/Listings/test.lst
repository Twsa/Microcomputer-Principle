A51 MACRO ASSEMBLER  TEST                                                                 04/18/2018 20:25:20 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\test.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE User\test.ASM INCDIR(.\User) SET(SMALL) DEBUG PRINT(.\Listings\test.lst
                      ) OBJECT(.\Objects\test.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ; FileName              :               lab2.ASM        

                       2     ; Author                :               Twsa Liu

                       3     ; Date                  :               2018-04-10

                       4     ; Description   :               This is a lab ofm AT89C52RC.

                       5     ;                                               The lab achieve function that include binke
                             ying

                       6     ;                                               ,delay,light leds and switch using

                       7      

                       8     ;Main function

0000                   9             ORG             0000H

0000 020030           10             LJMP    MAIN

                      11             ;ORG            0003H

                      12             ;LJMP   INT0_CALL

                      13             ;ORG            0013H

                      14             ;LJMP   INT1_CALL

                      15             ;ORG            0030H

000B                  16             ORG             000BH

000B 020038           17             LJMP    INT0_CALL

001B                  18             ORG             001BH

001B 020049           19             LJMP    INT1_CALL

0030                  20             ORG             0030H

                      21                     

0030                  22     MAIN:   

0030 12004E           23                     LCALL   INIT                    ;≥ı ºªØ≤Ÿ◊˜

0033 120074           24                     LCALL   INT_OPER                ;÷–∂œµƒ…Ë÷√µƒœ‡πÿ≤Ÿ◊˜   

0036 80FE             25                     SJMP    $                               ;µ»¥÷–∂œ

                      26     

0038 8E8B             27     INT0_CALL:      MOV             TL1,R6  

003A 8F8D             28                             MOV             TH1,R7

003C B2A0             29                             CPL             BUZ      

                      30                             

003E 758A18           31                             MOV             TL0,#T01        

0041 758CFC           32                             MOV             TH0,#T02

0044 D2AB             33                             SETB    ET1                     ;ø™∆ÙT1÷–∂œ

0046 C28F             34                             CLR             TF1                     

0048 32               35                             RETI            

                      36                             

0049 C2AB             37     INT1_CALL:      CLR             ET1                     ;πÿ±’T1÷–∂œ     

004B B2A0             38                             CPL             BUZ     

004D 32               39                             RETI

                      40     ;Initialization

004E 7590FF           41     INIT:   MOV             P1,#0FFH

  00A0                42                     BUZ             EQU     P2.0

  0090                43                     LED             EQU     P1.0

0051 7400             44                     MOV             A,#00H  

0053 75F000           45                     MOV             B,#00H

0056 7D00             46                     MOV             R5,#00H

0058 7581EF           47                     MOV             SP,#0EFH                ;…Ë÷√∂—’ª÷∏’Î

005B 7C01             48                     MOV             R4,#1D                  ;…Ë÷√’ºø’±»

005D 1160             49                     ACALL   DUTY_OPER

005F 22               50                     RET

                      51     ;Set duty ratio         …Ë÷√’ºø’±» ≤¢Œ™ T0 T1∏≥≥ı÷µ

                      52                             ;…Ë÷√’ºø’±» ∫Õ …Ë÷√’ºø’±»∂‘”¶µƒT1µƒ≥ı÷µ

                      53                             ;duty=10        0XFF9C

                      54                             ;duty=20        0XFF38

                      55                             ;duty=30        0XFED4

                      56                             ;duty=40        0XFE70

A51 MACRO ASSEMBLER  TEST                                                                 04/18/2018 20:25:20 PAGE     2

                      57                             ;duty=50        0XFE0C

                      58                             ;duty=60        0XFDA8

                      59                             ;duty=70        0XFD44

                      60                             ;duty=80        0XFCE0

                      61                             ;duty=90        0XFC7C

                      62                             ;duty=100       0XFC18

                      63                             ;T11            EQU     0E0H    

                      64                             ;T12            EQU     0B1H

0060                  65     DUTY_OPER:

                      66                             ;…Ë÷√÷‹∆⁄

0060 900095           67                             MOV             DPTR,#DUTY              ;int duty table ptr

  0018                68                             T01             EQU     18H

  00FC                69                             T02             EQU     0FCH

                      70                             

                      71                             ;¥”¡–±Ì÷–—°‘Ò’ºø’±»∂‘”¶µƒT1≥ı÷µ

0063 EC               72                             MOV             A,R4    

0064 75F000           73                             MOV             B,#00H

0067 14               74                             DEC             A

0068 23               75                             RL              A

0069 F5F0             76                             MOV             B,A

006B 93               77                             MOVC    A,@A+DPTR

006C FF               78                             MOV             R7,A

006D E5F0             79                             MOV             A,B

006F 2401             80                             ADD             A,#0X01 

0071 93               81                             MOVC    A,@A+DPTR       

0072 FE               82                             MOV             R6,A

                      83                             

0073 22               84                             RET

                      85     ;Interrupt operation control

0074                  86     INT_OPER:       

0074 758911           87                             MOV             TMOD,#11H       ;T0Œ™∑Ω Ω1 ∂® ±∆˜

0077 758A18           88                             MOV             TL0,#T01        

007A 758CFC           89                             MOV             TH0,#T02

                      90                             

007D D2A9             91                             SETB    ET0                     ;‘ –ÌT0÷–∂œ     

007F C28D             92                             CLR             TF0                     ;«Â0±Í÷æŒªTF0

0081 118A             93                             ACALL   NVIC            ;…Ë÷√÷–∂œ”≈œ»º∂

0083 D2AF             94                             SETB    EA                      ;CPUø™÷–∂œ

0085 D28E             95                             SETB    TR1

0087 D28C             96                             SETB    TR0     

0089 22               97                             RET

                      98                             

                      99     ;Set the priority of interrupt  

008A C2B8            100     NVIC:           CLR             PX0     

008C C2B9            101                             CLR             PT0

008E C2BA            102                             CLR             PX1                             

0090 C2BB            103                             CLR             PT1

0092 C2BC            104                             CLR             PS

0094 22              105                             RET

0095 FF9CFF38        106     DUTY:   DB              0XFF,0X9C,0XFF,0X38,0XFE,0XD4,0XFE,0X70,0XFE,0X0C,                 
                                          0XFD,0XA8,0XFD,0X44,0XFC,0XE0,0XFC,0X7C,0XFC,0X18

0099 FED4FE70                
009D FE0CFDA8                
00A1 FD44FCE0                
00A5 FC7CFC18                
                     107     

                     108             ;0XD8F0,0XC658,0XB1E0,0X9E58

                     109                             END

A51 MACRO ASSEMBLER  TEST                                                                 04/18/2018 20:25:20 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

B. . . . . . . . .  D ADDR   00F0H   A   
BUZ. . . . . . . .  B ADDR   00A0H.0 A   
DUTY . . . . . . .  C ADDR   0095H   A   
DUTY_OPER. . . . .  C ADDR   0060H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . .  B ADDR   00A8H.3 A   
INIT . . . . . . .  C ADDR   004EH   A   
INT0_CALL. . . . .  C ADDR   0038H   A   
INT1_CALL. . . . .  C ADDR   0049H   A   
INT_OPER . . . . .  C ADDR   0074H   A   
LED. . . . . . . .  B ADDR   0090H.0 A   
MAIN . . . . . . .  C ADDR   0030H   A   
NVIC . . . . . . .  C ADDR   008AH   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
PS . . . . . . . .  B ADDR   00B8H.4 A   
PT0. . . . . . . .  B ADDR   00B8H.1 A   
PT1. . . . . . . .  B ADDR   00B8H.3 A   
PX0. . . . . . . .  B ADDR   00B8H.0 A   
PX1. . . . . . . .  B ADDR   00B8H.2 A   
SP . . . . . . . .  D ADDR   0081H   A   
T01. . . . . . . .  N NUMB   0018H   A   
T02. . . . . . . .  N NUMB   00FCH   A   
TF0. . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . .  B ADDR   0088H.7 A   
TH0. . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . .  D ADDR   008DH   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . .  D ADDR   008BH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . .  B ADDR   0088H.6 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
